# Maintainer: Your Name <you@example.com>
pkgname=ssh-watchdog-gnome-extension
pkgver=0.1.0
pkgrel=1
pkgdesc='GNOME extension for monitoring SSH sessions'
arch=('x86_64')
url='https://example.invalid/ssh-watchdog'
license=('MIT')
depends=('gnome-shell')
optdepends=('openssh: sshd service for SSH session events')
install='ssh-watchdog.install'
source=(
  '../extension/extension.js'
  '../extension/prefs.js'
  '../extension/metadata.json'
  '../extension/stylesheet.css'
  '../extension/schemas/org.gnome.shell.extensions.ssh-watchdog.gschema.xml'
)
sha256sums=('SKIP' 'SKIP' 'SKIP' 'SKIP' 'SKIP')

package() {
  local uuid='ssh-watchdog@local'

  # Stage extension payload under /usr/share; install script copies it to user-local extension dir.
  install -Dm644 "$srcdir/extension.js" "$pkgdir/usr/share/ssh-watchdog/$uuid/extension.js"
  install -Dm644 "$srcdir/prefs.js" "$pkgdir/usr/share/ssh-watchdog/$uuid/prefs.js"
  install -Dm644 "$srcdir/metadata.json" "$pkgdir/usr/share/ssh-watchdog/$uuid/metadata.json"
  install -Dm644 "$srcdir/stylesheet.css" "$pkgdir/usr/share/ssh-watchdog/$uuid/stylesheet.css"
  install -Dm644 "$srcdir/org.gnome.shell.extensions.ssh-watchdog.gschema.xml" \
    "$pkgdir/usr/share/ssh-watchdog/$uuid/schemas/org.gnome.shell.extensions.ssh-watchdog.gschema.xml"

  glib-compile-schemas "$pkgdir/usr/share/ssh-watchdog/$uuid/schemas"
}
